<!doctype html><html lang=zh-tw>
<head>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<title> [DP] Sum over Subsets Optimization | Little Cube Blog</title>
<meta name=description content="如果我也能成為電神就好了...">
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=robots content="all,follow">
<meta name=googlebot content="index,follow,snippet,archive">
<meta name=google-site-verification content="OQ_9U47lnsbNF2bY2B6jTk8Ea7wqE_fu7ou8CAMe388">
<script src=https://code.iconify.design/1/1.0.7/iconify.min.js></script>
<script src=https://littlecube8152.github.io/js/prism.js></script> <script src=https://littlecube8152.github.io/js/prism-line-numbers.js></script>
<meta property="og:title" content="[DP] Sum over Subsets Optimization">
<meta property="og:description" content="笨方塊想學 SoS DP 優化被爆揍，燒雞">
<meta property="og:type" content="article">
<meta property="og:url" content="https://littlecube8152.github.io/posts/dp-sum-over-subsets/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2021-06-10T09:57:32+08:00">
<meta property="article:modified_time" content="2021-06-10T09:57:32+08:00">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="[DP] Sum over Subsets Optimization">
<meta name=twitter:description content="CF 165E, CF 383E, CF 449D, CF 800D">
<link rel=stylesheet href=https://littlecube8152.github.io/css/style-dark.css>
<link rel=stylesheet href=https://littlecube8152.github.io/css/syntax.css> <link rel=stylesheet href=https://littlecube8152.github.io/css/prism.css><!--[if lt IE 9]><script src=https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js></script>
<script src=https://oss.maxcdn.com/respond/1.4.2/respond.min.js></script><![endif]-->
<link rel=icon type=image/png href=https://littlecube8152.github.io/images/favicon.ico>
</head>
<body class="max-width mx-auto px3 ltr">
<div class="content index py4">
<div id=header-post>
<a id=menu-icon href=#><i class="fas fa-bars fa-lg"></i></a>
<a id=menu-icon-tablet href=#><i class="fas fa-bars fa-lg"></i></a>
<a id=top-icon-tablet href=# onclick="$('html, body').animate({scrollTop:0},'fast')" style=display:none aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg"></i></a>
<span id=menu>
<span id=nav>
<ul>
<li><a href=../../>Home</a></li>
<li><a href=../../posts>Posts</a></li>
<li><a href=../../working>Working</a></li>
<li><a href=../../tags>Tags</a></li>
<li><a href=../../resources>Resources</a></li>
</ul>
</span>
<br>
<span id=actions>
<ul>
<li>
<a class=icon href=https://littlecube8152.github.io/posts/ds-scanning-line/ aria-label=Previous>
<i class="fas fa-chevron-left" aria-hidden=true onmouseover="$('#i-prev').toggle()" onmouseout="$('#i-prev').toggle()"></i>
</a>
</li>
<li>
<a class=icon href=https://littlecube8152.github.io/posts/virtual-boi-2020/ aria-label=Next>
<i class="fas fa-chevron-right" aria-hidden=true onmouseover="$('#i-next').toggle()" onmouseout="$('#i-next').toggle()"></i>
</a>
</li>
<li>
<a class=icon href=# onclick="$('html, body').animate({scrollTop:0},'fast')" aria-label="Top of Page">
<i class="fas fa-chevron-up" aria-hidden=true onmouseover="$('#i-top').toggle()" onmouseout="$('#i-top').toggle()"></i>
</a>
</li>
<li>
<a class=icon href=# aria-label=Share>
<i class="fas fa-share-alt" aria-hidden=true onmouseover="$('#i-share').toggle()" onmouseout="$('#i-share').toggle()" onclick="return $('#share').toggle(),!1"></i>
</a>
</li>
</ul>
<span id=i-prev class=info style=display:none>Previous post</span>
<span id=i-next class=info style=display:none>Next post</span>
<span id=i-top class=info style=display:none>Back to top</span>
<span id=i-share class=info style=display:none>Share post</span>
</span>
<br>
<div id=share style=display:none>
<ul>
<li>
<a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2flittlecube8152.github.io%2fposts%2fdp-sum-over-subsets%2f" aria-label=Facebook>
<i class="fab fa-facebook" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://twitter.com/share?url=https%3a%2f%2flittlecube8152.github.io%2fposts%2fdp-sum-over-subsets%2f&text=%5bDP%5d%20Sum%20over%20Subsets%20Optimization" aria-label=Twitter>
<i class="fab fa-twitter" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2flittlecube8152.github.io%2fposts%2fdp-sum-over-subsets%2f&title=%5bDP%5d%20Sum%20over%20Subsets%20Optimization" aria-label=Linkedin>
<i class="fab fa-linkedin" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2flittlecube8152.github.io%2fposts%2fdp-sum-over-subsets%2f&is_video=false&description=%5bDP%5d%20Sum%20over%20Subsets%20Optimization" aria-label=Pinterest>
<i class="fab fa-pinterest" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="mailto:?subject=%5bDP%5d%20Sum%20over%20Subsets%20Optimization&body=Check out this article: https%3a%2f%2flittlecube8152.github.io%2fposts%2fdp-sum-over-subsets%2f" aria-label=Email>
<i class="fas fa-envelope" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://getpocket.com/save?url=https%3a%2f%2flittlecube8152.github.io%2fposts%2fdp-sum-over-subsets%2f&title=%5bDP%5d%20Sum%20over%20Subsets%20Optimization" aria-label=Pocket>
<i class="fab fa-get-pocket" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="http://reddit.com/submit?url=https%3a%2f%2flittlecube8152.github.io%2fposts%2fdp-sum-over-subsets%2f&title=%5bDP%5d%20Sum%20over%20Subsets%20Optimization" aria-label=reddit>
<i class="fab fa-reddit" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2flittlecube8152.github.io%2fposts%2fdp-sum-over-subsets%2f&name=%5bDP%5d%20Sum%20over%20Subsets%20Optimization&description=CF%20165E%2c%20CF%20383E%2c%20CF%20449D%2c%20CF%20800D" aria-label=Tumblr>
<i class="fab fa-tumblr" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2flittlecube8152.github.io%2fposts%2fdp-sum-over-subsets%2f&t=%5bDP%5d%20Sum%20over%20Subsets%20Optimization" aria-label="Hacker News">
<i class="fab fa-hacker-news" aria-hidden=true></i>
</a>
</li>
</ul>
</div>
<div id=toc>
<nav id=TableOfContents>
<ul>
<li><a href=#問題>問題</a></li>
<li><a href=#優化>優化</a>
<ul>
<li><a href=#暴力>暴力</a></li>
<li><a href=#優化過的暴力>優化過的暴力</a></li>
<li><a href=#優化-1>優化</a></li>
</ul>
</li>
<li><a href=#討論>討論</a></li>
<li><a href=#例題---codeforces-165e-compatible-numbers>例題 - Codeforces 165E Compatible Numbers</a>
<ul>
<li><a href=#觀察>觀察</a></li>
<li><a href=#實作>實作</a></li>
</ul>
</li>
<li><a href=#類題---codeforces-383e-vowels>類題 - Codeforces 383E Vowels</a>
<ul>
<li><a href=#觀察-1>觀察</a></li>
</ul>
</li>
<li><a href=#類題---codeforces-449d-jzzhu-and-numbers>類題 - Codeforces 449D Jzzhu and Numbers</a>
<ul>
<li><a href=#觀察-2>觀察</a></li>
<li><a href=#實作-1>實作</a></li>
</ul>
</li>
<li><a href=#類題---codeforces-800d-varying-kibibits>類題 - Codeforces 800D Varying Kibibits</a>
<ul>
<li><a href=#觀察-3>觀察</a></li>
</ul>
</li>
<li><a href=#後記>後記</a>
<ul>
<li><a href=#reference>Reference</a></li>
</ul>
</li>
</ul>
</nav>
</div>
</span>
</div>
<article class=post itemscope itemtype=http://schema.org/BlogPosting>
<header>
<h1 class=posttitle itemprop="name headline">
[DP] Sum over Subsets Optimization
</h1>
<h1 class=postsubtitle itemprop="name headline">
CF 165E, CF 383E, CF 449D, CF 800D
</h1>
<div class=meta>
<div class=postdate>
<time datetime="2021-06-10 09:57:32 +0800 +0800" itemprop=datePublished>2021-06-10</time>
</div>
<div class=article-tag>
<i class="fas fa-tag"></i>
<a class=tag-link href=../../%20tags/tutorial rel=tag>tutorial</a>
</div>
</div>
</header>
<div class=content itemprop=articleBody>
<h2 id=問題>問題</h2>
<p>Sum over Subsets 要優化的東西長得像是：</p>
<p>$\displaystyle F_{mask} = \sum_{i\subseteq mask} A_i$</p>
<p>而$mask$表示一個子集（宇集是有$N$個元素的集合）。</p>
<h2 id=優化>優化</h2>
<h3 id=暴力>暴力</h3>
<p>我們可以枚舉所有集合，<br>
再枚舉一次集合，看看是不是要求的那個集合的子集。 <br>
複雜度$\mathcal O(4^N)$。</p>
<pre><code class=language-cpp>for (int mask = 0; mask &lt; (1 &lt;&lt; N); mask++)
    for (int i = 0; i &lt;= mask; i++)
        if ((mask &amp; i) == i)
            F[mask] += A[i];
</code></pre>
<h3 id=優化過的暴力>優化過的暴力</h3>
<p>剛剛的枚舉方法有多枚舉到不是子集的東西，<br>
那如果直接枚舉需要的子集，<br>
可以這樣做：</p>
<pre><code class=language-cpp>for (int mask = 0; mask &lt; (1 &lt;&lt; N); mask++)
    for (int i = mask;; i = ((i - 1) &amp; mask))
    {
        F[mask] += A[i];
        if(i == 0) break;
    }
</code></pre>
<p>那為什麼這樣是可以的呢？<br>
假如我把所有子集排序好，</p>
<ul>
<li>拿掉最低位元</li>
<li>把這個位元以下有被集合涵蓋到的都設為 <code>1</code></li>
</ul>
<p>直覺的證明是忽略掉原本集合沒有的，當作是二進位減法。<br>
這樣的複雜度是$\mathcal O(3^N)$，<br>
證明有排列組合（元素有不在母集、在母集不在子集、在母集也在子集）； <br>
或是用二項式定理 $\displaystyle\sum_{i = 0}^{N}C^N_i 2^i = 3^N$。</p>
<h3 id=優化-1>優化</h3>
<p>如果一個集合$S$有$n(S)$個元素，<br>
它會被$2^{N - n(S)}$個集合給算到，<br>
也就是說，其中顯然有很多是可以優化掉的，</p>
<p>假設現在要計算的是$F_{mask}$，<br>
考慮它的第 $i$ 位（1-ordered），</p>
<ul>
<li>如果這位是<code>0</code>，就可以不用理它，往下計算。</li>
<li>如果這位是<code>1</code>，就需要考慮這個位元在子集中有或沒有：
<ul>
<li>子集中沒有這個位元的，剛好是$mask \oplus 2^i$計算下一位的結果，</li>
<li>子集中有這個位元的，往下計算，因為找不到其他值可以涵蓋這部分。</li>
</ul>
</li>
</ul>
<p>而 $mask$ 的所有子集只有一個（$mask$本身）在所有的<code>1</code>都一樣，<br>
換句話說，所有的子集的值都<strong>至少要透過 $mask \oplus 2^i$ 得到</strong>，<br>
而 $mask \oplus 2^i$ 如果要先計算好，只要按照數字遞增枚舉就好，</p>
<p>這樣只要最後把$A_{mask}$加上去就好，整體來講就是一個DP：</p>
<p>$dp_{mask,\, i} = \begin{cases}
dp_{mask,\, i - 1} & i \notin \text{set of } mask \\
dp_{mask,\, i - 1} + dp_{mask \oplus 2^i,\, i - 1} & i \in \text{set of } mask \\
A_{mask} & i = 0 \\
\end{cases}$<br>
$ F_{mask} = dp_{mask,\,N}$</p>
<p>直覺的寫法：</p>
<pre><code class=language-cpp>for (int mask = 0; mask &lt; (1 &lt;&lt; N); mask++)
    dp[mask][0] = A[mask];
for (int mask = 0; mask &lt; (1 &lt;&lt; N); mask++)
    for (int i = 1; i &lt;= N; i++)
    {
        if (mask &amp; (1 &lt;&lt; (i - 1)))
            dp[mask][i] = dp[mask][i - 1] + dp[mask ^ (1 &lt;&lt; (i - 1))][i - 1];
        else
            dp[mask][i] = dp[mask][i - 1];
    }
F[mask] = dp[mask][N];
</code></pre>
<p>但如果把兩個迴圈內外交換，可以壓縮記憶體：</p>
<pre><code class=language-cpp>for (int mask = 0; mask &lt; (1 &lt;&lt; N); mask++)
    F[mask] = A[mask];

for (int i = 0; i &lt; N; i++)
    for (int mask = 0; mask &lt; (1 &lt;&lt; N); mask++)
        if (mask &amp; (1 &lt;&lt; i))
            F[mask] += F[mask ^ (1 &lt;&lt; i)];
</code></pre>
<p>時間複雜度$\mathcal O(N\,2^N)$。</p>
<h2 id=討論>討論</h2>
<p>在Codeforces的<a href=./#reference>這篇</a>Blog上面有提到這個問題：<br>
如果有兩個函數：<br>
$\displaystyle F_{mask} = f\Bigg(\sum_{i \subset mask}G_i\Bigg),\, G_{mask} = G\Bigg(\sum_{i \subseteq mask}F_i\Bigg)$<br>
要怎麼計算？<br>
其實就跟剛剛優化的推導一樣，<br>
由於$\,F\,$需要他的子集（不含本身），$G\,$需要他的子集（含本身），<br>
所以不能套用記憶體優化，一次計算完一個$\,mask$，然後先計算$\,F\,$再計算$\,G\,$，<br>
就可以達到$\mathcal O(N\,2^N)$的複雜度了。</p>
<h2 id=例題---codeforces-165e-compatible-numbers>例題 - Codeforces 165E Compatible Numbers</h2>
<p><a href=https://codeforces.com/contest/165/problem/E>Link</a><br>
有一個長度為$\,N\,$的陣列，<br>
對每個元素都找到有沒有其他元素使得兩個 AND 起來會是 0。<br>
$N \leq 10^6,\,1 \leq a_i \leq 4\times 10^6$</p>
<h3 id=觀察>觀察</h3>
<p>兩個數字 AND 起來是 0 的意思就是他們沒有相同的位元是<code>1</code>，<br>
所以所有可能的數字剛好會是$\displaystyle (2^{\lceil \log_2 \max a_i \rceil} - 1) \oplus a_i$的子集，</p>
<h3 id=實作>實作</h3>
<p>就直接取$dp_{mask} = mask$的子集中的任一可能，<br>
做剛剛提到的 SoS (​Sum ​over ​Subset) 的優化，<br>
複雜度$\mathcal O(K\,2^K)$，其中$K = \lceil \log_2 \max a_i \rceil$。</p>
<p><strong><a href=https://codeforces.com/contest/165/submission/119207382>Code</a></strong></p>
<h2 id=類題---codeforces-383e-vowels>類題 - Codeforces 383E Vowels</h2>
<p><a href=https://codeforces.com/contest/383/problem/E>Link</a></p>
<p>給你 $N$ 個長度為 $3$，僅包含a~x（共$24$種字元）的字串，<br>
定義一個字是合法的表示其中至少有一個字母是母音，<br>
問對於所有 $2^{24}$ 種可能的母音選擇，有多少字串是合法的。<br>
答案輸出請平方之後 $\text{XOR}$。</p>
<h3 id=觀察-1>觀察</h3>
<p>考慮簡單一點的狀況：如果每個字串都只有一個位元，<br>
那顯然就是直接做 SoS DP 下去求出 $2^{24}$ 種可能，</p>
<p>那如果有 $3$ 個字呢？<br>
問題出在，當子集涵蓋到兩個就會被算到兩次，<br>
所以可以用排容處理，一樣做 SoS DP。</p>
<p><strong><a href=https://codeforces.com/contest/383/submission/119450351>Code</a></strong></p>
<h2 id=類題---codeforces-449d-jzzhu-and-numbers>類題 - Codeforces 449D Jzzhu and Numbers</h2>
<p><a href=https://codeforces.com/contest/449/problem/D>Link</a><br>
有一個長度為$\,N\,$的陣列 $a$，<br>
找到有多少組序列 $1 &lt; i_1 &lt; i_2 &lt; \cdots &lt; i_k$ （$k$ 僅代表序列的長度）且<br>
$a_{i_1} \text{ AND } a_{i_2} \text{ AND } \cdots \text{ AND } a_{i_k} = 0$。<br>
輸出$\!\mod 10^9 + 7$。</p>
<p>$N \leq 10^6,\,0 \leq a_i \leq 10^6$</p>
<h3 id=觀察-2>觀察</h3>
<p>如果直接照 LIS 的順序枚舉，<br>
可以令 $dp[i][mask]$ 表示前 $i$ 個元素中，$\text{AND}$ 起來是 $mask$ 的方法數，<br>
不過這樣複雜度是$\mathcal O(N\,2^K)$（其中$K = \lceil \log_2 \max a_i \rceil$），</p>
<p>但題目還有一個性質：</p>
<ul>
<li>所求的組合 $\text{AND}$ 起來是 $0$，實際上就是每個位元flip之後 $\text{OR}$ 起來是<code>111...11</code></li>
<li>令$b_i = \text{NOT }a_i$，<br>
當$b_{i_1} \text{ OR } b_{i_2} \text{ OR } \cdots \text{ OR } b_{i_k} = mask$，那$b_{i_1},\,b_{i_2},\,\cdots,\, b_{i_k}$ 都是 $mask$ 的submask，</li>
<li>不過反過來的情況，只能得到$b_{i_1} \text{ OR } b_{i_2} \text{ OR } \cdots \text{ OR } b_{i_k}$是 $mask$ 的submask。</li>
</ul>
<p>這樣要怎麼知道有多少組合是題目要的？<br>
把不要的扣掉！</p>
<h3 id=實作-1>實作</h3>
<p>對反轉的 $b_i$ 做一次 SoS 之後，<br>
所得的總和換成 $ 2^{dp_{mask}} - 1$，剛好是所可以形成的組合數，<br>
要再把submask給排容掉，<br>
所以，這裡有兩種做法：</p>
<ul>
<li>直接對係數做一次 SoS</li>
<li>直接對 $dp$陣列再做一次 SoS 扣掉<br>
證明：
當我枚舉第 $i$ 個bit的時候，他會涵蓋到 $i - 1$個bit往下的所有組合<br>
（因為計算$dp$的順序），<br>
所以這樣涵蓋到的剛好是除卻 $mask$ 的所有submask。</li>
</ul>
<p><strong><a href=https://codeforces.com/contest/449/submission/119426175>Code - 計算係數</a> <a href=https://codeforces.com/contest/449/submission/119426267>Code - 直接扣dp陣列</a></strong></p>
<h2 id=類題---codeforces-800d-varying-kibibits>類題 - Codeforces 800D Varying Kibibits</h2>
<p><strong>註：這題同時也是772D</strong></p>
<p>給你一個長度為 $N$ 的整數陣列 $a$，令這個陣列叫做 $T$，</p>
<p>定義$f(L)$（$L$是一個非空集合）：<br>
他的值定義為：</p>
<ul>
<li>加入前導0，補成同樣長度</li>
<li>把每個位數都取$\min$</li>
<li>全部都在$10$進位以下。</li>
</ul>
<p>例如$f(530,\,932,\,81) = f(5\textbf{30},\,9\textbf{3}2,\,\textbf{0}81) = 030 = 30$。</p>
<p>又定義$\displaystyle G(x) = x \cdot \left( \sum_{\begin{matrix} S\subseteq T,\, \\ S\neq\varnothing,\, \\ f(S)=x \\ \end{matrix}} \left( \sum_{y\in S}y \right)^2 \mod 10^9+7 \right)$，<br>
輸出$G(0) \oplus G(1) \oplus G(2) \oplus \cdots \oplus G(999999)$。</p>
<p>$N \leq 10^6,\, a_i &lt; 10^6$</p>
<h3 id=觀察-3>觀察</h3>
<p>跟剛剛<a href=./#%E9%A1%9E%E9%A1%8C---codeforces-449d-jzzhu-and-numbers>這題</a>很像，</p>
<p>所以觀察原本的式子：<br>
$\displaystyle G(x) = x \cdot \left( \sum_{\begin{matrix}\varnothing \subset S\subseteq T,\, \\ f(S)=x \\ \end{matrix}} \left( \sum_{y\in S}y \right)^2 \mod 10^9+7 \right)$<br>
如果改成：<br>
$\displaystyle G'(x) = x \cdot \left( \sum_{\begin{matrix}\varnothing \subset S\subseteq T,\, \\ f(S){\color{yellowgreen}\geq}x \\ \end{matrix}} \left( \sum_{y\in S}y \right)^2 \mod 10^9+7 \right)$<br>
可以發現就是所有位數都大於等於 $x$ 的元素去組合，<br>
這時候又有：<br>
$\displaystyle G'(x) = x \cdot 2^{n(U) - 1} \left( \sum_{y\in U}y^2 + \sum_{y_1\in U}\sum_{y_2\in U}y_1y_2 \mod 10^9+7 \right)$<br>
其中 $\displaystyle U = \arg\max_{\begin{matrix} S \subseteq T \\ \forall a_i \in S,\,\text{each digit of } a_i \geq x\end{matrix}} n(S)$，<br>
這個式子有點亂，但它的意思是：</p>
<ul>
<li>$U$ 是所有位數都大於等於 $x$ 的該位數形成的集合，</li>
<li>所以，它的組合有 $2^{n(U)}$ 種，</li>
<li>算出來的時候，$a_i^2$ 總共有 $2^{n(U) - 1}$ 個，
<ul>
<li>因為每個組合會貢獻 $1$ 個，總共有 除了該元素都有取或不取$ \Rightarrow 2^{n(U) - 1}$ 個集合</li>
</ul>
</li>
<li>每個$a_ia_j$也剛好有 $2^{n(U) - 1}$ 個，
<ul>
<li>因為每個組合會貢獻 $2$ 個，總共有 除了那兩個元素都有取或不取$ \Rightarrow 2^{n(U) - 2}$ 個集合</li>
</ul>
</li>
</ul>
<p>這個東西就是上面所描述的，接著，再由<br>
$\displaystyle\left(\sum_{i = 1}^{n(U)} a_i \right)^2 = \sum_{i = 1}^{n(U)} a_i^2 + \sum_{i = 1}^{n(U)}\sum_{j = i + 1}^{n(U)} 2a_ia_j$<br>
可以額外紀錄$\displaystyle\sum_{i = 1}^{n(U)} a_i^2$湊出上面的結果，</p>
<p>所以簡單整理一下，總共需要</p>
<ul>
<li>紀錄平方和跟總和 $\Rightarrow$ SoS</li>
<li>將總和平方，湊出函數值</li>
<li>對結果排容，得出答案 $\Rightarrow$ SoS</li>
</ul>
<p>注意這裡的 SoS 跟二進位下有些許不同，</p>
<details>
<summary>做法</summary>
<p>當我們要算總和的時候，<br>
需要枚舉該位是不是 $9$，<br>
從大到小枚舉，這樣我取$1$才能接續取到 $2,\,3,\,\cdots,\,9$。</p>
<p>當我們要排容的時候，<br>
需要枚舉該位是不是 $9$，<br>
從小到大枚舉，這樣我取$1$才能留下 $2,\,3,\,\cdots,\,9$，<br>
排掉更低位數不合的情況。</p>
</details>
<p><strong><a href=https://codeforces.com/contest/800/submission/119512284>Code</a></strong></p>
<h2 id=後記>後記</h2>
<h3 id=reference>Reference</h3>
<p><a href=https://codeforces.com/blog/entry/45223>Codeforces Blog - SOS Dynamic Programming [Tutorial]</a><br>
<a href=https://robert1003.github.io/2020/10/05/dp-sum-over-subset.html>A Simple Introduction to SoS(Sum over Subset) Dynamic Programming</a></p>
<p>還有感謝在Code Community提示我，讓我想出這些題目的所有人。</p>
</div>
</article>
<div id=footer-post-container>
<div id=footer-post>
<div id=nav-footer style=display:none>
<ul>
<li><a href=../../>Home</a></li>
<li><a href=../../posts>Posts</a></li>
<li><a href=../../working>Working</a></li>
<li><a href=../../tags>Tags</a></li>
<li><a href=../../resources>Resources</a></li>
</ul>
</div>
<div id=toc-footer style=display:none>
<nav id=TableOfContents>
<ul>
<li><a href=#問題>問題</a></li>
<li><a href=#優化>優化</a>
<ul>
<li><a href=#暴力>暴力</a></li>
<li><a href=#優化過的暴力>優化過的暴力</a></li>
<li><a href=#優化-1>優化</a></li>
</ul>
</li>
<li><a href=#討論>討論</a></li>
<li><a href=#例題---codeforces-165e-compatible-numbers>例題 - Codeforces 165E Compatible Numbers</a>
<ul>
<li><a href=#觀察>觀察</a></li>
<li><a href=#實作>實作</a></li>
</ul>
</li>
<li><a href=#類題---codeforces-383e-vowels>類題 - Codeforces 383E Vowels</a>
<ul>
<li><a href=#觀察-1>觀察</a></li>
</ul>
</li>
<li><a href=#類題---codeforces-449d-jzzhu-and-numbers>類題 - Codeforces 449D Jzzhu and Numbers</a>
<ul>
<li><a href=#觀察-2>觀察</a></li>
<li><a href=#實作-1>實作</a></li>
</ul>
</li>
<li><a href=#類題---codeforces-800d-varying-kibibits>類題 - Codeforces 800D Varying Kibibits</a>
<ul>
<li><a href=#觀察-3>觀察</a></li>
</ul>
</li>
<li><a href=#後記>後記</a>
<ul>
<li><a href=#reference>Reference</a></li>
</ul>
</li>
</ul>
</nav>
</div>
<div id=share-footer style=display:none>
<ul>
<li>
<a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2flittlecube8152.github.io%2fposts%2fdp-sum-over-subsets%2f" aria-label=Facebook>
<i class="fab fa-facebook fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://twitter.com/share?url=https%3a%2f%2flittlecube8152.github.io%2fposts%2fdp-sum-over-subsets%2f&text=%5bDP%5d%20Sum%20over%20Subsets%20Optimization" aria-label=Twitter>
<i class="fab fa-twitter fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2flittlecube8152.github.io%2fposts%2fdp-sum-over-subsets%2f&title=%5bDP%5d%20Sum%20over%20Subsets%20Optimization" aria-label=Linkedin>
<i class="fab fa-linkedin fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2flittlecube8152.github.io%2fposts%2fdp-sum-over-subsets%2f&is_video=false&description=%5bDP%5d%20Sum%20over%20Subsets%20Optimization" aria-label=Pinterest>
<i class="fab fa-pinterest fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="mailto:?subject=%5bDP%5d%20Sum%20over%20Subsets%20Optimization&body=Check out this article: https%3a%2f%2flittlecube8152.github.io%2fposts%2fdp-sum-over-subsets%2f" aria-label=Email>
<i class="fas fa-envelope fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://getpocket.com/save?url=https%3a%2f%2flittlecube8152.github.io%2fposts%2fdp-sum-over-subsets%2f&title=%5bDP%5d%20Sum%20over%20Subsets%20Optimization" aria-label=Pocket>
<i class="fab fa-get-pocket fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="http://reddit.com/submit?url=https%3a%2f%2flittlecube8152.github.io%2fposts%2fdp-sum-over-subsets%2f&title=%5bDP%5d%20Sum%20over%20Subsets%20Optimization" aria-label=reddit>
<i class="fab fa-reddit fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2flittlecube8152.github.io%2fposts%2fdp-sum-over-subsets%2f&name=%5bDP%5d%20Sum%20over%20Subsets%20Optimization&description=CF%20165E%2c%20CF%20383E%2c%20CF%20449D%2c%20CF%20800D" aria-label=Tumblr>
<i class="fab fa-tumblr fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2flittlecube8152.github.io%2fposts%2fdp-sum-over-subsets%2f&t=%5bDP%5d%20Sum%20over%20Subsets%20Optimization" aria-label="Hacker News">
<i class="fab fa-hacker-news fa-lg" aria-hidden=true></i>
</a>
</li>
</ul>
</div>
<div id=actions-footer>
<a id=menu-toggle class=icon href=# onclick="return $('#nav-footer').toggle(),!1" aria-label=Menu>
<i class="fas fa-bars fa-lg" aria-hidden=true></i> Menu</a>
<a id=toc-toggle class=icon href=# onclick="return $('#toc-footer').toggle(),!1" aria-label=TOC>
<i class="fas fa-list fa-lg" aria-hidden=true></i> TOC</a>
<a id=share-toggle class=icon href=# onclick="return $('#share-footer').toggle(),!1" aria-label=Share>
<i class="fas fa-share-alt fa-lg" aria-hidden=true></i> share</a>
<a id=top style=display:none class=icon href=# onclick="$('html, body').animate({scrollTop:0},'fast')" aria-label="Top of Page">
<i class="fas fa-chevron-up fa-lg" aria-hidden=true></i> Top</a>
</div>
</div>
</div>
<footer id=footer>
<div class=footer-left>
Copyright &copy; 2022 Little Cube Blog
</div>
<div class=footer-right>
<nav>
<ul>
<li><a href=../../>Home</a></li>
<li><a href=../../posts>Posts</a></li>
<li><a href=../../working>Working</a></li>
<li><a href=../../tags>Tags</a></li>
<li><a href=../../resources>Resources</a></li>
</ul>
</nav>
</div>
</footer>
</div>
</body>
<link rel=stylesheet href=../../lib/font-awesome/css/all.min.css>
<script src=../../lib/jquery/jquery.min.js></script>
<script src=../../js/main.js></script>
<script>MathJax={tex:{inlineMath:[['$','$'],['\\(','\\)']]},svg:{fontCache:'global'}}</script>
<script type=text/javascript id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js></script>
</script>
</html>